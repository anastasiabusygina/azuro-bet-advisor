# Задача: Улучшение конфигурации и параметризация скрипта для работы с матчами Azuro

## Описание
В текущей реализации мы перенесли жестко закодированные данные матчей в конфигурационные файлы. Теперь необходимо улучшить процесс взаимодействия с API и локальными данными, а также добавить дополнительную функциональность для автоматического обновления данных о матчах.

## План работы
1. Оптимизировать порядок поиска матчей
   - Улучшить алгоритм выбора между локальными данными и API
   - Добавить режим автоматического использования локальных данных без запроса пользователя
   - Сохранять время последнего обновления данных для каждого матча

2. Точно определить запросы к GraphQL API для получения кнопок матча
   - Разработать оптимальный запрос для получения всех типов ставок и их параметров
   - Обеспечить корректное сопоставление ID условий с параметрами ставок (1.5, 2.5, 3.5)
   - Создать систему для точного определения рекомендованной ставки среди нескольких похожих вариантов
   - Учесть различные американские коэффициенты (-668, +105, +1017) при отображении кнопок

3. Добавить параметры командной строки для гибкой настройки работы скрипта
   - Флаг `--local-only` для использования только локальных данных
   - Флаг `--api-only` для принудительного использования API
   - Флаг `--auto-update` для автоматического обновления данных по расписанию
   - Флаг `--quiet` для работы без интерактивных запросов

4. Создать механизм проверки актуальности данных
   - Проверять наличие обновлений для матчей, которые еще не начались
   - Автоматически обновлять устаревшие данные по необходимости
   - Добавить метку времени последнего обновления для отслеживания актуальности данных

5. Улучшить форматирование вывода
   - Опционально выводить результаты в JSON формате для программной обработки
   - Добавить возможность фильтрации вывода по типам ставок
   - Создать режим компактного вывода с основной информацией
   - Реализовать вывод в формате, аналогичном UI на скриншоте с группировкой по параметрам

## Критерии готовности
1. Скрипт успешно запускается с различными параметрами командной строки
2. Работает как в интерактивном, так и в автоматическом режиме
3. Корректно обрабатываются случаи с отсутствующим файлом конфигурации
4. Имеется документация по использованию всех параметров и опций
5. Данные о матчах автоматически сохраняются в структурированном виде
6. Добавлена проверка актуальности данных и механизм обновления
7. Все хардкодные значения вынесены в конфигурационные файлы
8. Реализован режим автоматического обновления данных
9. GraphQL запросы точно определяют все доступные ставки и их параметры
10. Корректно идентифицируются рекомендованные ставки среди похожих вариантов

## Технические требования
- Совместимость с Bash 4.0+
- Использование jq для обработки JSON
- Минимизация внешних зависимостей
- Поддержка переменных окружения из .env файла
- Обработка ошибок и корректное завершение работы 